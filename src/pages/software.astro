---
import BaseLayout from "../layouts/BaseLayout.astro";
import { Image } from "astro:assets";

const GITHUB_PROFILE = "https://github.com/yuzhang-io";

// ✅ WebP banners in src/assets/img/software/
import mols2imgBanner from "../assets/img/software/mols2img.webp";
import mtoxBindersBanner from "../assets/img/software/mtox-binders.webp";
import safetynetBanner from "../assets/img/software/safetynet.webp";
import insilicobioticsBanner from "../assets/img/software/insilicobiotics.webp";

const PROJECTS = [
  {
    title: "my14ers",
    subtitle:
      "Track Colorado 14ers, toggle climbs, and export a glossy checklist snapshot to share your progress.",
    // Banner is in public/ so we can reference it directly as a URL
    banner: "/img/software/my14ers.png",
    tags: ["Open-source", "Leaflet", "Export PNG"],
    links: [
      { label: "Live site", href: "https://yuzhang-io.github.io/my14ers/" },
      { label: "GitHub", href: "https://github.com/yuzhang-io/my14ers" },
    ],
    private: false,
  },
  {
    title: "mols2img",
    subtitle: "SMILES/CXSMILES → instant structure sheets.",
    banner: mols2imgBanner,
    tags: ["Open-source", "Cheminformatics", "Web tool"],
    links: [
      { label: "Live tool", href: "https://yuzhang-io.github.io/mols2img/" },
      { label: "GitHub", href: "https://github.com/yuzhang-io/mols2img" },
    ],
    private: false,
  },
  {
    title: "mtox-binders",
    subtitle: "Deep learning–guided design of antitoxins for marine toxin-induced neurotoxicity.",
    banner: mtoxBindersBanner,
    tags: ["Private", "In development", "Protein–ligand"],
    links: [],
    private: true,
  },
  {
    title: "SafetyNet",
    subtitle: "Safety-aware prioritization and modeling for early drug discovery.",
    banner: safetynetBanner,
    tags: ["Private", "In development", "Toxicity"],
    links: [],
    private: true,
  },
  {
    title: "insilicobiotics",
    subtitle: "Closed-loop antibiotic discovery: generate → predict → test → learn.",
    banner: insilicobioticsBanner,
    tags: ["Private", "In development", "AMR"],
    links: [],
    private: true,
  },
];
---

<BaseLayout title="Software — Yu Zhang" description="Tools and pipelines for AI-driven drug discovery.">
  <!-- Hero -->
  <section class="relative overflow-hidden rounded-3xl border border-zinc-200 shadow-sm dark:border-zinc-800">
    <div
      class="absolute inset-0"
      style="background: linear-gradient(135deg, rgb(6,147,227) 0%, rgb(14,11,11) 15%, rgb(15,7,7) 61%, rgb(155,81,224) 100%);"
    ></div>

    <div class="relative p-8 sm:p-10 text-white">
      <div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
        <div>
          <h1 class="text-3xl sm:text-4xl font-semibold tracking-tight">Software</h1>
          <p class="mt-3 max-w-3xl text-white/85 leading-7">
            Selected tools and pipelines for AI-driven drug discovery. Some projects are private while under active development.
          </p>
        </div>

        <a
          href={GITHUB_PROFILE}
          target="_blank"
          rel="noreferrer"
          class="inline-flex items-center justify-center rounded-xl bg-white/10 px-4 py-2 text-sm font-medium ring-1 ring-white/20 hover:bg-white/15"
        >
          GitHub ↗
        </a>
      </div>
    </div>
  </section>

  <!-- Projects -->
  <section class="mt-10">
    <div class="grid gap-4 sm:grid-cols-2">
      {PROJECTS.map((p) => (
        <article class="overflow-hidden rounded-2xl border border-zinc-200 bg-white shadow-sm dark:border-zinc-800 dark:bg-zinc-900/40">
          {/* Banner */}
          <div class="relative">
            {typeof p.banner === "string" ? (
              <img
                src={p.banner}
                alt={`${p.title} banner`}
                class="h-40 w-full object-cover"
                loading="lazy"
                decoding="async"
              />
            ) : (
              <Image
                src={p.banner}
                alt={`${p.title} banner`}
                class="h-40 w-full object-cover"
                loading="lazy"
                decoding="async"
                format="webp"
                quality={82}
              />
            )}

            {p.private && (
              <div class="absolute left-4 top-4 rounded-full bg-black/50 px-3 py-1 text-xs font-medium text-white ring-1 ring-white/15">
                Private / In development
              </div>
            )}
          </div>

          {/* Body */}
          <div class="p-6">
            <h2 class="text-lg font-semibold tracking-tight">{p.title}</h2>
            <p class="mt-2 text-sm leading-6 text-zinc-600 dark:text-zinc-300">{p.subtitle}</p>

            <div class="mt-4 flex flex-wrap gap-2">
              {p.tags.map((t) => (
                <span class="rounded-full border border-zinc-200 px-2 py-0.5 text-xs text-zinc-600 dark:border-zinc-800 dark:text-zinc-300">
                  {t}
                </span>
              ))}
            </div>

            {/* Links */}
            {p.links?.length ? (
              <div class="mt-5 flex flex-wrap gap-3">
                {p.links.map((l) => (
                  <a
                    href={l.href}
                    target="_blank"
                    rel="noreferrer"
                    class="rounded-xl bg-zinc-900 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800 dark:bg-white dark:text-zinc-900 dark:hover:bg-zinc-100"
                  >
                    {l.label} ↗
                  </a>
                ))}
              </div>
            ) : (
              <div class="mt-5 text-sm text-zinc-500 dark:text-zinc-400">
                Details available on request.
              </div>
            )}
          </div>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>